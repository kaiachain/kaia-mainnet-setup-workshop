[
{
	"uri": "/klaytn-cypress-setup-workshop/10_prerequisites/10_firewall_configuration.html",
	"title": "Firewall Configuration",
	"tags": [],
	"description": "",
	"content": "\n1. (Only for CN) Firewall configuration 1) If Baobab validation is completed, remove below Klaytn CN\u0026rsquo;s IP address of Baobab from your firewall ingress rule. 54.180.180.202\n54.180.18.176\n52.79.134.72\n52.78.232.39\n2) For communication and multichannel between Cypress CN, allow TCP 32323-32324 with below IP addresses to your firewall ingress rule. 52.187.181.245 13.250.156.19 18.181.103.22 13.251.72.113 15.164.153.242 52.78.129.138 183.110.37.118 3.114.52.253 13.115.105.184 3.112.138.154 13.124.195.223 52.68.240.46 54.254.44.48 3.37.228.174 3.1.128.148 52.221.66.32 13.250.248.137 52.194.171.123 18.136.27.69 121.53.201.23 223.130.161.81 121.53.201.21 46.137.252.23 13.209.36.151 110.76.140.22 49.50.160.250 15.164.2.23 18.182.254.228 52.78.134.8 18.141.124.207 15.164.144.217 13.213.141.240 20.222.4.64 54.255.230.170 52.197.133.145 54.255.162.46 3.34.162.243\n3) Additionally, it is required to allow UDP 32323 with the same IP addresses to your firewall ingress rule. ** The same IP addresses in the previous step should be added.\nPlease note that the above IP addresses are attached to other CCO CNs.\nIf you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/50_start_services/10_start_klaytn_service.html",
	"title": "Start the klaytn services",
	"tags": [],
	"description": "",
	"content": "\n1. Start the Klaytn service, if it is running. 1) For CN, $ sudo systemctl status kcnd $ sudo systemctl start kcnd $ sudo systemctl status kcnd 2) For PN, $ sudo systemctl status kpnd $ sudo systemctl start kpnd $ sudo systemctl status kpnd 3) If the services are not installed from yum, you can start the service like below, $ sudo \u0026lt;installation_path\u0026gt;/kcnd status $ sudo \u0026lt;installation_path\u0026gt;/kcnd start $ sudo \u0026lt;installation_path\u0026gt;/kcnd status If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/40_configure_network/10_prepare_genesis_for_cypress.html",
	"title": "Prepare genesis.json for Cypress network",
	"tags": [],
	"description": "",
	"content": "\n1. Remove or backup existing genesis.json for Baobab. 1) For CN, $ mv \u0026lt;your_klaytn_home_path\u0026gt;/kcnd/data/genesis.json \u0026lt;your_klaytn_home_path\u0026gt;/kcnd/data/genesis.json.baobab 2) For PN, $ mv \u0026lt;your_klaytn_home_path\u0026gt;/kpnd/data/genesis.json \u0026lt;your_klaytn_home_path\u0026gt;/kpnd/data/genesis.json.baobab 2. Download the genesis.json for Cypress network. 1) For CN, $ curl -X GET https://packages.klaytn.net/cypress/genesis.json -o \u0026lt;your_klaytn_home_path\u0026gt;/kcnd/data/genesis.json 2) For PN, $ curl -X GET https://packages.klaytn.net/cypress/genesis.json -o \u0026lt;your_klaytn_home_path\u0026gt;/kpnd/data/genesis.json 3. Check the value of chainId in the genesis.json downloaded. ** Please note that Cypress network id is 8217.\n1) For CN, $ grep \u0026#34;chainId\u0026#34; \u0026lt;your_klaytn_home_path\u0026gt;/kcnd/data/genesis.json \u0026#34;chainId\u0026#34;: 8217, 2) For PN, $ grep \u0026#34;chainId\u0026#34; \u0026lt;your_klaytn_home_path\u0026gt;/kpnd/data/genesis.json \u0026#34;chainId\u0026#34;: 8217, ** If you want to get more information about genesis.json, please refer this link below.\nhttps://docs.klaytn.foundation/node/service-chain/references/genesis\nIf you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/30_download_chaindata/10_download_chaindata.html",
	"title": "Download the latest Cypress chaindata",
	"tags": [],
	"description": "",
	"content": "\n1. Download the latest chaindata snapshot from the Cypress snapshot archive. 0) Before proceeding, please check if your disk space is enough to store and extract the Cypress chaindata. ** You can refer to the chaindata size via Cypress snapshot archive where the Cypress chaindata snapshots have been snapshotted.\n1) Download the latest one from the archive. ** Please note that this step will take a lot of time to download since snapshot is more than 700 GB. If you want to reduce the time, please refer the next step.\n** The latest chaindata name can be different with this example due to the date information. $ URL=`curl -s https://packages.klaytn.net/cypress/chaindata/ |grep latest |awk -F\u0026#39;\u0026#34;\u0026#39; \u0026#39;{print $2}\u0026#39;` $ echo $URL https://s3.ap-northeast-2.amazonaws.com/klaytn-chaindata/cypress/klaytn-cypress-chaindata-20220719010712.tar.gz $ wget $URL\n2) Optional - If you want to save the time for downloading, you can consider using axel command. **Axel tries to accelerate the download process by using multiple connections per file. (Amazon Linux 2) $ sudo amazon-linux-extras install epel (CentOS) $ sudo yum install epel-release -y $ sudo yum install axel -y $ URL=`curl -s https://packages.klaytn.net/cypress/chaindata/ |grep latest |awk -F\u0026#39;\u0026#34;\u0026#39; \u0026#39;{print $2}\u0026#39;` $ echo $URL https://s3.ap-northeast-2.amazonaws.com/klaytn-chaindata/cypress/klaytn-cypress-chaindata-20220719010712.tar.gz $ axel -n8 $URL\nIf you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/20_network_reset/10_stop_klaytn.html",
	"title": "Stop the Klaytn service",
	"tags": [],
	"description": "",
	"content": "\n1. Stop the Klaytn service, if it is running. 1) For CN, $ sudo systemctl status kcnd $ sudo systemctl stop kcnd $ sudo systemctl status kcnd 2) For PN, $ sudo systemctl status kpnd $ sudo systemctl stop kpnd $ sudo systemctl status kpnd 3) If the services are not installed from yum, you can stop the service like below, $ sudo \u0026lt;installation_path\u0026gt;/kcnd status $ sudo \u0026lt;installation_path\u0026gt;/kcnd stop $ sudo \u0026lt;installation_path\u0026gt;/kcnd status If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/10_prerequisites.html",
	"title": "Prerequisites",
	"tags": [],
	"description": "",
	"content": "Chapter 1 Prerequisites The prerequisites for joining Cypress network are covered in this chapter.\nPlease click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/10_prerequisites/20_package_installation.html",
	"title": "Package Installation",
	"tags": [],
	"description": "",
	"content": "\n2. Installation of Klaytn packages for CN and PN ** We\u0026rsquo;ve already installed packages during the Pre-cypress stage. If you need to install newly, please refer these documents.\n1) CN - https://docs.klaytn.foundation/node/core-cell/installation-guide/consensus-node-setup/installation-guide 2) PN - https://docs.klaytn.foundation/node/core-cell/installation-guide/proxy-node-setup/installation-guide If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/50_start_services/20_start_monitoring_services.html",
	"title": "Start the Telegraf service",
	"tags": [],
	"description": "",
	"content": "\n2. Start monitoring services. 1) For both CN and PN, start the Telegraf service. $ sudo systemctl status telegraf $ sudo systemctl start telegraf $ sudo systemctl status telegraf 2) For both CN and PN, start the Datadog service if it is stopped. $ sudo systemctl status datadog-agent $ sudo systemctl start datadog-agent $ sudo systemctl status datadog-agent If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/40_configure_network/20_node_configuration.html",
	"title": "Node Configuration",
	"tags": [],
	"description": "",
	"content": "\n1. Modify network, discovery and boot node information. ** Note that CN and PN have some different information.\n1) For CN, your configuration should be modified as shown below. $ egrep \u0026#34;^NETWORK|NO_DISCOVER|BOOTNODES\u0026#34; /etc/kcnd/conf/kcnd.conf NETWORK=\u0026#34;cypress\u0026#34; NETWORK_ID= NO_DISCOVER=0 # setting 1 to disable discovery BOOTNODES=\u0026#34;kni://b286e4140aea469992146c299f8915e34d59a014c29a045de41e578014761114176f42dece34a54ce1e37f92ab981fe1bb14e54fe23576e1182778c40e6272a2@ston146.cypress.klaytn.net:32323?ntype=bn,kni://a6b61ee786952e3f8b681867d2535485622e80d0b9b7b89f26b2c631e59a4246b5f879487fbde7c324c3308ece0cdb1d7738430bdffce4f7f8c4f5a09eef80a3@ston738.cypress.klaytn.net:32323?ntype=bn,kni://b25838727eb6b4631c8f8910b4f6376fe28041f251ee21129078a61d18d62d0dc2601be5a97eab8bdb5772309f861fddb7192935483813ef20e5716a34266f16@ston903.cypress.klaytn.net:32323?ntype=bn\u0026#34; 2) For PN, your configuration should be modified as shown below. $ egrep \u0026#34;^NETWORK|NO_DISCOVER|BOOTNODES\u0026#34; /etc/kpnd/conf/kpnd.conf NETWORK=\u0026#34;cypress\u0026#34; NETWORK_ID= NO_DISCOVER=1 # setting 1 to disable discovery BOOTNODES= If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/30_download_chaindata/20_unarchive_chaindata.html",
	"title": "Extract the chaindata",
	"tags": [],
	"description": "",
	"content": "\n2. Extract the chaindata downloaded to the DATA_DIR. 1) For CN, $ tar -C \u0026lt;your_klaytn_home_path\u0026gt;/kcnd/data -xvf klaytn-cypress-chaindata-20220719010712.tar.gz ** If you want to reduce the time for extracting, please refer this pigz example. (Amazon Linux 2) $ sudo amazon-linux-extras install epel (CentOS) $ sudo yum install epel-release -y $ sudo yum install pigz $ tar -I pigz -C \u0026lt;your_klaytn_home_path\u0026gt;/kcnd/data -xvf klaytn-cypress-chaindata-20220719010712.tar.gz\n2) For PN, $ tar -C \u0026lt;your_klaytn_home_path\u0026gt;/kpnd/data -xvf klaytn-cypress-chaindata-20220719010712.tar.gz If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/20_network_reset/20_stop_telegraf.html",
	"title": "Stop the Telegraf service",
	"tags": [],
	"description": "",
	"content": "\n2. Stop the Telegraf service, if it is running. 1) For both CN and PN, $ sudo systemctl status telegraf $ sudo systemctl stop telegraf $ sudo systemctl status telegraf If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/20_network_reset.html",
	"title": "Reset Network Configuration",
	"tags": [],
	"description": "",
	"content": "Chapter 2 Reset Network Configuration In this chapter, you will reset the Baobab network configuration. Please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/30_download_chaindata/30_remove_chaindata.html",
	"title": "Remove Chaindata",
	"tags": [],
	"description": "",
	"content": "\n3. You can remove the chaindata downloaded, if the previous step is completed. 1) For both CN and PN, $ rm klaytn-cypress-chaindata-20220719010712.tar.gz If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/50_start_services/30_check_the_services.html",
	"title": "Check the services",
	"tags": [],
	"description": "",
	"content": "\n3. Watch the service log to confirm if your nodes are correctly joined. ** If the node is not a proposer at that block, and the consensus is successful, the node have executed(==validates) the block. In other words, a block is inserted. _** You can refer this document for more details about node log.\n1) For CN, $ tail \u0026lt;your_klaytn_home_path\u0026gt;/kcnd/log/kcnd.out INFO Inserted a new block number=14 hash=13cbfc…f007fc txs=0 gas=0 elapsed=793.458µs processTxs=167ns finalize=157.708µs validateState=7.542µs totalWrite=443.417µs trieWrite=256.667µs 2) For PN, $ tail \u0026lt;your_klaytn_home_path\u0026gt;/kcnd/log/kpnd.out INFO Inserted a new block number=14 hash=13cbfc…f007fc txs=0 gas=0 elapsed=793.458µs processTxs=167ns finalize=157.708µs validateState=7.542µs totalWrite=443.417µs trieWrite=256.667µs If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/40_configure_network/30_pn_configuration.html",
	"title": "PN static-nodes.json",
	"tags": [],
	"description": "",
	"content": "\n2. Check if the static-nodes.json has correct information for your PN. ** Unlike CN, PN uses a static-nodes.json file to find out where to connect and PNN consists of PNs within the Cypress network topology. https://docs.klaytn.foundation/klaytn#tiered-networks\nTypically, PNs maintain just one connection with a PN in a neighboring Core Cell. The number of peer connections is subject to change depending on the network configuration. 1) For Thrust , PN1 [ \u0026#34;CN_KNI_ADDRESS@CN_INTERNAL_IP:PORT?discport=0\u0026amp;ntype=cn\u0026#34; ] PN2 [ \u0026#34;CN_KNI_ADDRESS@CN_INTERNAL_IP:PORT?discport=0\u0026amp;ntype=cn\u0026#34; ]\nIf you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/20_network_reset/30_remove_data_and_log.html",
	"title": "Remove chaindata and log",
	"tags": [],
	"description": "",
	"content": "\n3. Remove existing chaindata and log for pre-cypress. 0) During pre-cypress, you did set \u0026lt;klaytn_home_path\u0026gt; for Ansible deployment. But you can check this out if you can\u0026rsquo;t remember where your data directory is located. $ grep \u0026#34;DATA_DIR\u0026#34; /etc/kpnd/conf/kpnd.conf 1) For CN, $ sudo rm -Rf \u0026lt;your_klaytn_home_path\u0026gt;/kcnd/data/klay/chaindata $ sudo rm -Rf \u0026lt;your_klaytn_home_path\u0026gt;/kcnd/data/klay/lightchaindata $ sudo rm -Rf \u0026lt;your_klaytn_home_path\u0026gt;/kcnd/log/* 2) For PN, $ sudo rm -Rf \u0026lt;your_klaytn_home_path\u0026gt;/kpnd/data/klay/chaindata $ sudo rm -Rf \u0026lt;your_klaytn_home_path\u0026gt;/kpnd/data/klay/lightchaindata $ sudo rm -Rf \u0026lt;your_klaytn_home_path\u0026gt;/kpnd/log/* If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/30_download_chaindata.html",
	"title": "Fast Sync with Cypress",
	"tags": [],
	"description": "",
	"content": "Chapter 3 Fast Sync with Cypress chaindata Klaytn has been snapshotting Cypress chaindata once a day. In this chapter, we are going to explore where the snapshot is stored, and the latest chaindata snapshot of Cypress will be used to sync as fast as possible. Please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/50_start_services/40_check_monitoring_dashboard.html",
	"title": "Check Monitoring Dashboard",
	"tags": [],
	"description": "",
	"content": "\n4. Take a look at Grafana dashboard to confirm if your nodes are correctly joined to Cypress network. Link : Cypress Grafana ** You can refer this document to check your services further.\nhttps://docs.klaytn.foundation/node/core-cell/installation-guide/testing-the-core-cell#kcn-console-kpn-console If your nodes are shown and CN/PN Inter Connections looks 2 in this dashboard, everything is configured normally. Please send a message to Klaytn DevOps by Slack channel #cco_7th_batch. If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/40_configure_network/40_node_initialization.html",
	"title": "Node Initialization",
	"tags": [],
	"description": "",
	"content": "\n1. Now, we will initialize each node using the Cypress genesis file. 1) For CN, $ cd \u0026lt;your_klaytn_home_path\u0026gt;/kcnd/data $ kcn --networkid 8217 init --datadir \u0026lt;your_klaytn_home_path\u0026gt;/kcnd/data genesis.json 2) For PN, $ cd \u0026lt;your_klaytn_home_path\u0026gt;/kpnd/data $ kcn --networkid 8217 init --datadir \u0026lt;your_klaytn_home_path\u0026gt;/kpnd/data genesis.json If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/40_configure_network.html",
	"title": "Configure Cypress Network",
	"tags": [],
	"description": "",
	"content": "Chapter 4 Configure Cypress Network Now, we are going to re-configure networks to join Cypress. Please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/40_configure_network/50_telegraf_configuration.html",
	"title": "Telegraf Configuration",
	"tags": [],
	"description": "",
	"content": "\n1. To monitor your nodes in Cypress Dashboard, please change the influxdb configuration as below: 1) For both CN and PN, $ grep -A2 \u0026#34;influxdb\u0026#34; /etc/telegraf/telegraf.d/klaytn.conf [[outputs.influxdb]] urls = [ \u0026#34;http://13.209.53.161:45560\u0026#34; ] database = \u0026#34;klaytn_cypress\u0026#34; If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/50_start_services.html",
	"title": "Start the services",
	"tags": [],
	"description": "",
	"content": "Chapter 5 Start the services Now, we are ready to start Klaytn service for Cypress. Please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/40_configure_network/60_datadog_configuration.html",
	"title": "Datadog Configuration",
	"tags": [],
	"description": "",
	"content": "\n2. For additional monitoring, we are planning to use Datadog as well. Please follow this step for Datadog installation. 1) For CN, $ DD_API_KEY=\u0026#34;DATADOG API KEY\u0026#34; HOST_NAME=\u0026#34;CN HOSTNAME\u0026#34; NODE_TYPE=cn INSTANCE=cn LOG_DIR=\u0026#34;\u0026lt;your_klaytn_home_path\u0026gt;/kcnd/log/kcnd.out\u0026#34; bash -c \u0026#34;$(curl -L https://raw.githubusercontent.com/klaytn/datadog-agent-install./main/install-datadog-agent.sh)\u0026#34; ** DD_API_KEY will be shared with you by Slack DM.\n** Please use lowercase, then append \u0026lsquo;cn\u0026rsquo; for HOST_NAME\n** For example, LOG_DIR = /data/kcnd/log/kcnd.out, HOST_NAME=netmarble-cn\n2) For PN, $ DD_API_KEY=\u0026#34;DATADOG API KEY\u0026#34; HOST_NAME=\u0026#34;PN HOSTNAME\u0026#34; NODE_TYPE=pn INSTANCE=pn1 bash -c \u0026#34;$(curl -L https://raw.githubusercontent.com/klaytn/datadog-agent-install./main/install-datadog-agent.sh)\u0026#34; ** DD_API_KEY will be shared with you by Slack DM.\n** Please use lowercase, then append \u0026lsquo;pn1\u0026rsquo; or \u0026lsquo;pn2\u0026rsquo; for HOST_NAME\n** For example, LOG_DIR = /data/kcnd/log/kcnd.out, HOST_NAME=netmarble-pn1\n3. To allow your nodes to communicate Datadog, please add these IP addresses to the firewall of each node. Port number 443 3.233.144.0/20 Port number 10516 3.233.152.63/32 If you finish this step, please click the next button \u0026gt; on the right side of this page.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/60_conclusion.html",
	"title": "Conclusion",
	"tags": [],
	"description": "",
	"content": "\nCongratulations! Now, you are playing in the Baobab network. "
},
{
	"uri": "/klaytn-cypress-setup-workshop/",
	"title": "Klaytn - CCO Onboarding - Cypress",
	"tags": [],
	"description": "",
	"content": "\nCCO Onboarding - Cypress This online instruction let you join Klaytn Cypress network. If Consensus/Proxy node setup is already completed, you can start with chapter 2.\n"
},
{
	"uri": "/klaytn-cypress-setup-workshop/categories.html",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/klaytn-cypress-setup-workshop/tags.html",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]